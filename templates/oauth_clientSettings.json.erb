{
  "clientMetadata": [
<% @oauth_client_metadata.each_with_index do |val, i| -%>
      {
        "parameter": "<%= val['parameter'] -%>",
        "description": "<%= val['description'] -%>"
        "multiValued": <%= val['multiValued'] -%>
      }<%= ',' if i < (@oauth_client_metadata.size - 1) %>
<% end -%>
  ], 
  "dynamicClientRegistration": {
<% if @oauth_dynamic_client_registration['initialAccessTokenScope'] -%>
    "initialAccessTokenScope": "<%= @oauth_dynamic_client_registration['initialAccessTokenScope'] -%>",
<% end -%>
<% if @oauth_dynamic_client_registration['restrictCommonScopes'] -%>
    "restrictCommonScopes": <%= @oauth_dynamic_client_registration['restrictCommonScopes'] -%>,
<% end -%>
    "restrictedCommonScopes": [
<% @oauth_dynamic_client_registration['restrictedCommonScopes'].each_with_index do |val, i| -%>
      "<%= val -%>"<%= ',' if i < (@oauth_dynamic_client_registration['restrictedCommonScopes'].size - 1) %>
<% end -%>
    ],
    "allowedExclusiveScopes": [
<% @oauth_dynamic_client_registration['allowedExclusiveScopes'].each_with_index do |val, i| -%>
      "<%= val -%>"<%= ',' if i < (@oauth_dynamic_client_registration['allowedExclusiveScopes'].size - 1) %>
<% end -%>
    ]
<% if @oauth_dynamic_client_registration['requestPolicyRef'] -%>,
    "requestPolicyRef": {
      "id": "<%= @oauth_dynamic_client_registration['requestPolicyRef']['id'] -%>",
      "location": "<%= @oauth_dynamic_client_registration['requestPolicyRef']['location'] -%>"
    }
<% end -%>
<% if @oauth_dynamic_client_registration['enforceReplayPrevention'] -%>,
    "enforceReplayPrevention": <%= @oauth_dynamic_client_registration['enforceReplayPrevention'] -%>
<% end -%>
<% if @oauth_dynamic_client_registration['requireSignedRequests'] -%>,
    "requireSignedRequests": <%= @oauth_dynamic_client_registration['requireSignedRequests'] -%>
<% end -%>
<% if @oauth_dynamic_client_registration['defaultAccessTokenManagerRef'] -%>,
    "defaultAccessTokenManagerRef": {
      "id": "<%= @oauth_dynamic_client_registration['defaultAccessTokenManagerRef']['id'] -%>",
      "location": "<%= @oauth_dynamic_client_registration['defaultAccessTokenManagerRef']['location'] -%>"
    }
<% end -%>
<% if @oauth_dynamic_client_registration['persistentGrantExpirationType'] -%>,
    "persistentGrantExpirationType": "<%= @oauth_dynamic_client_registration['persistentGrantExpirationType'] -%>"
<% end -%>
<% if @oauth_dynamic_client_registration['persistentGrantExpirationTime'] -%>,
    "persistentGrantExpirationTime": <%= @oauth_dynamic_client_registration['persistentGrantExpirationTime'] -%>
<% end -%>
<% if @oauth_dynamic_client_registration['persistentGrantExpirationTimeUnit'] -%>,
    "persistentGrantExpirationTimeUnit": "<%= @oauth_dynamic_client_registration['persistentGrantExpirationTimeUnit'] -%>"
<% end -%>
<% if @oauth_dynamic_client_registration['persistentGrantIdleTimeoutType'] -%>,
    "persistentGrantIdleTimeoutType": "<%= @oauth_dynamic_client_registration['persistentGrantIdleTimeoutType'] -%>"
<% end -%>
<% if @oauth_dynamic_client_registration['persistentGrantIdleTimeout'] -%>,
    "persistentGrantIdleTimeout": <%= @oauth_dynamic_client_registration['persistentGrantIdleTimeout'] -%>
<% end -%>
<% if @oauth_dynamic_client_registration['persistentGrantIdleTimeoutTimeUnit'] -%>,
    "persistentGrantIdleTimeoutTimeUnit": "<%= @oauth_dynamic_client_registration['persistentGrantIdleTimeoutTimeUnit'] -%>"
<% end -%>
<% if @oauth_dynamic_client_registration['clientCertIssuerType'] -%>,
    "clientCertIssuerType": "<%= @oauth_dynamic_client_registration['clientCertIssuerType'] -%>"
<% end -%>
<% if @oauth_dynamic_client_registration['clientCertIssuerRef'] -%>,
    "clientCertIssuerRef": {
      "id": "<%= @oauth_dynamic_client_registration['clientCertIssuerRef']['id'] -%>",
      "location": "<%= @oauth_dynamic_client_registration['clientCertIssuerRef']['location'] -%>"
    }
<% end -%>
<% if @oauth_dynamic_client_registration['refreshRolling'] -%>,
    "refreshRolling": "<%= @oauth_dynamic_client_registration['refreshRolling'] -%>"
<% end -%>
<% if @oauth_dynamic_client_registration['oidcPolicy'] -%>,
    "oidcPolicy": {
      "idTokenSigningAlgorithm": "<%= @oauth_dynamic_client_registration['oidcPolicy']['idTokenSigningAlgorithm'] -%>",
      "idTokenEncryptionAlgorithm": "<%= @oauth_dynamic_client_registration['oidcPolicy']['idTokenEncryptionAlgorithm'] -%>",
      "idTokenContentEncryptionAlgorithm": "<%= @oauth_dynamic_client_registration['oidcPolicy']['idTokenContentEncryptionAlgorithm'] -%>",
<%    if @oauth_dynamic_client_registration['oidcPolicy']['policyGroup'] -%>
      "policyGroup": {
        "id": "<%= @oauth_dynamic_client_registration['oidcPolicy']['policyGroup']['id'] -%>",
        "location": "<%= @oauth_dynamic_client_registration['oidcPolicy']['policyGroup']['location'] -%>"
      }
<%    end -%>
    }
<% end -%>,
    "policyRefs": [
<% @oauth_dynamic_client_registration['policyRefs'].each_with_index do |val, i| -%>
      {
        "id": "<%= val['id'] -%>",
        "location": "<%= val['location'] -%>"
      }<%= ',' if i < (@oauth_dynamic_client_registration['policyRefs'].size - 1) %>
<% end -%>
    ],
<% if @oauth_dynamic_client_registration['deviceFlowSettingType'] -%>
    "deviceFlowSettingType": "<%= @oauth_dynamic_client_registration['deviceFlowSettingType'] -%>"
<% end -%>
<% if @oauth_dynamic_client_registration['userAuthorizationUrlOverride'] -%>,
    "userAuthorizationUrlOverride": "<%= @oauth_dynamic_client_registration['userAuthorizationUrlOverride'] -%>"
<% end -%>
<% if @oauth_dynamic_client_registration['pendingAuthorizationTimeoutOverride'] -%>,
    "pendingAuthorizationTimeoutOverride": <%= @oauth_dynamic_client_registration['pendingAuthorizationTimeoutOverride'] -%>
<% end -%>
<% if @oauth_dynamic_client_registration['devicePollingIntervalOverride'] -%>,
    "devicePollingIntervalOverride": <%= @oauth_dynamic_client_registration['devicePollingIntervalOverride'] -%>
<% end -%>
<% if @oauth_dynamic_client_registration['bypassActivationCodeConfirmationOverride'] -%>,
    "bypassActivationCodeConfirmationOverride": <%= @oauth_dynamic_client_registration['bypassActivationCodeConfirmationOverride'] -%>
<% end -%>
<% if @oauth_dynamic_client_registration['requireProofKeyForCodeExchange'] -%>,
    "requireProofKeyForCodeExchange": <%= @oauth_dynamic_client_registration['requireProofKeyForCodeExchange'] -%>
<% end -%>
<% if @oauth_dynamic_client_registration['cibaPollingInterval'] -%>,
    "cibaPollingInterval": <%= @oauth_dynamic_client_registration['cibaPollingInterval'] -%>
<% end -%>
<% if @oauth_dynamic_client_registration['cibaRequireSignedRequests'] -%>,
    "cibaRequireSignedRequests": <%= @oauth_dynamic_client_registration['cibaRequireSignedRequests'] -%>
<% end -%>
  }
}
